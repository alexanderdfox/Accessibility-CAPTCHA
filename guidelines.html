<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Accessibility Guidelines - Reader</title>
<style>
  :root{
	--bg:#f6f8fa; --card:#fff; --accent:#2563eb; --muted:#6b7280; --error:#dc2626;
	--code-bg:#f8f9fa; --code-border:#e9ecef; --link:#2563eb;
	font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  *:focus-visible{outline:3px solid var(--accent);outline-offset:2px}
  *:focus{outline:3px solid var(--accent);outline-offset:2px}
  .js-focus-visible *:focus:not(.focus-visible){outline:none}
  body{margin:0;background:var(--bg);color:#1f2937;line-height:1.6;padding:0}
  .skip-link{position:absolute;top:-40px;left:0;background:var(--accent);color:#fff;padding:8px 16px;text-decoration:none;border-radius:4px;z-index:1000}
  .skip-link:focus{top:8px}
  .container{max-width:900px;margin:0 auto;padding:24px;background:var(--card);min-height:100vh}
  header{background:var(--card);border-bottom:2px solid #e6e9ef;padding:20px 0;margin-bottom:32px;position:sticky;top:0;z-index:100}
  header h1{margin:0;font-size:28px;font-weight:700;color:#1f2937}
  header p{margin:8px 0 0;color:var(--muted);font-size:14px}
  nav{background:#f8fafc;padding:16px;border-radius:8px;margin-bottom:32px;border:1px solid #e6e9ef}
  nav h2{font-size:16px;font-weight:600;margin:0 0 12px;color:#1f2937}
  nav ul{list-style:none;padding:0;margin:0;columns:2;column-gap:24px}
  nav li{margin-bottom:8px;break-inside:avoid}
  nav a{color:var(--accent);text-decoration:none;font-size:14px}
  nav a:hover{text-decoration:underline}
  nav a:focus{outline:2px solid var(--accent);outline-offset:2px;border-radius:2px}
  main{max-width:800px;margin:0 auto}
  h1{font-size:32px;font-weight:700;margin:48px 0 16px;color:#1f2937;line-height:1.2}
  h2{font-size:24px;font-weight:600;margin:40px 0 16px;color:#1f2937;line-height:1.3;padding-top:16px;border-top:2px solid #e6e9ef}
  h2:first-of-type{border-top:none;padding-top:0}
  h3{font-size:20px;font-weight:600;margin:32px 0 12px;color:#1f2937;line-height:1.4}
  h4{font-size:18px;font-weight:600;margin:24px 0 10px;color:#1f2937}
  p{margin:0 0 16px;line-height:1.7}
  ul,ol{margin:0 0 16px 24px;padding-left:8px;line-height:1.7}
  li{margin-bottom:8px}
  code{background:var(--code-bg);padding:2px 6px;border-radius:4px;font-family:"Monaco","Menlo","Ubuntu Mono","Consolas","source-code-pro",monospace;font-size:0.9em;color:#e83e8c;border:1px solid var(--code-border)}
  pre{background:var(--code-bg);padding:16px;border-radius:8px;overflow-x:auto;border:1px solid var(--code-border);margin:16px 0}
  pre code{background:none;padding:0;border:none;color:#1f2937;font-size:14px;line-height:1.6}
  blockquote{border-left:4px solid var(--accent);padding-left:16px;margin:16px 0;color:var(--muted);font-style:italic}
  a{color:var(--link);text-decoration:none}
  a:hover{text-decoration:underline}
  a:focus{outline:2px solid var(--accent);outline-offset:2px;border-radius:2px}
  table{width:100%;border-collapse:collapse;margin:16px 0;border:1px solid #e6e9ef}
  th{background:#f8f9fa;padding:12px;text-align:left;font-weight:600;border-bottom:2px solid #e6e9ef}
  td{padding:12px;border-bottom:1px solid #e6e9ef}
  tr:hover{background:#f8f9fa}
  hr{border:none;border-top:2px solid #e6e9ef;margin:32px 0}
  .toc{background:#f8fafc;padding:20px;border-radius:8px;margin:32px 0;border:1px solid #e6e9ef}
  .toc h2{margin-top:0;border-top:none;padding-top:0}
  .toc ul{list-style:none;padding-left:0}
  .toc li{margin-bottom:8px}
  .toc a{font-weight:500}
  .back-to-top{position:fixed;bottom:24px;right:24px;background:var(--accent);color:#fff;padding:12px 16px;border-radius:8px;text-decoration:none;box-shadow:0 4px 12px rgba(0,0,0,0.15);z-index:1000;display:none}
  .back-to-top:focus{display:block}
  .back-to-top.visible{display:block}
  .loading{text-align:center;padding:48px;color:var(--muted)}
  .error{background:#fff1f2;border:2px solid #ffd7de;color:#7f1d1d;padding:16px;border-radius:8px;margin:16px 0}
  footer{text-align:center;padding:32px 0;color:var(--muted);font-size:14px;border-top:2px solid #e6e9ef;margin-top:64px}
  @media (max-width: 768px) {
	.container{padding:16px}
	header h1{font-size:24px}
	nav ul{columns:1}
	h1{font-size:28px}
	h2{font-size:22px}
	h3{font-size:18px}
  }
  /* High contrast mode */
  body.high-contrast{background:#000 !important;color:#fff !important}
  body.high-contrast *{color:#fff !important}
  body.high-contrast .container{background:#000 !important;border:3px solid #fff !important}
  body.high-contrast header{border-bottom-color:#fff !important}
  body.high-contrast code{background:#000 !important;border:1px solid #fff !important;color:#fff !important}
  body.high-contrast pre{background:#000 !important;border:1px solid #fff !important}
  body.high-contrast pre code{color:#fff !important}
  body.high-contrast a{color:#fff !important;text-decoration:underline}
  body.high-contrast table,body.high-contrast th,body.high-contrast td{border-color:#fff !important}
  body.high-contrast .back-to-top{background:#fff !important;color:#000 !important;border:3px solid #fff !important}
  /* Accessibility Settings Panel */
  .a11y-panel{position:fixed;top:20px;right:20px;z-index:10000}
  .a11y-toggle{background:#1f2937;color:#fff;border:0;padding:12px 16px;border-radius:8px;cursor:pointer;font-size:14px;box-shadow:0 4px 12px rgba(0,0,0,0.15);min-height:44px}
  .a11y-toggle:focus-visible{outline:3px solid #fff;outline-offset:2px}
  .a11y-menu{position:absolute;top:100%;right:0;margin-top:8px;background:#fff;border:2px solid #e6e9ef;border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,0.15);padding:20px;min-width:320px;max-width:400px;max-height:80vh;overflow-y:auto;display:none}
  .a11y-menu.open{display:block}
  .a11y-section{margin-bottom:20px;padding-bottom:20px;border-bottom:1px solid #e6e9ef}
  .a11y-section:last-child{border-bottom:0;margin-bottom:0;padding-bottom:0}
  .a11y-section h3{font-size:16px;font-weight:600;margin:0 0 12px;color:#1f2937}
  .a11y-control{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;gap:12px}
  .a11y-control:last-child{margin-bottom:0}
  .a11y-control label{display:flex;align-items:center;gap:8px;font-size:14px;cursor:pointer;flex:1;margin:0}
  .a11y-control input[type="range"]{flex:1;max-width:150px}
  .a11y-value{font-size:12px;color:#6b7280;min-width:40px;text-align:right}
  select.a11y-select{padding:8px 12px;border-radius:6px;border:2px solid #e6e9ef;font-size:14px;min-height:40px;width:100%}
  .large-text{font-size:125%}
  .extra-large-text{font-size:150%}
  .huge-text{font-size:200%}
  .reduce-motion *{animation-duration:0.01ms !important;animation-iteration-count:1 !important;transition-duration:0.01ms !important}
  .enhanced-focus *:focus-visible{outline-width:4px !important;outline-offset:4px !important}
  @media (prefers-contrast: high) {
	*{border-width:2px !important}
	button,input,select{border-width:3px !important}
  }
  @media (prefers-reduced-motion: reduce) {
	.a11y-menu{transition:none}
  }
  /* Color blindness filters */
  .color-protanopia{filter:url(#protanopia)}
  .color-deuteranopia{filter:url(#deuteranopia)}
  .color-tritanopia{filter:url(#tritanopia)}
  .color-monochrome{filter:grayscale(100%)}
  /* Reading guide */
  .reading-guide{position:absolute;background:rgba(255,255,0,0.3);pointer-events:none;z-index:9999;display:none}
  .reading-guide.active{display:block}
  /* Tab order indicator */
  .tab-indicator{position:absolute;border:3px solid #ff0000;border-radius:4px;pointer-events:none;z-index:10001;display:none}
  .tab-indicator.active{display:block;animation:pulse 1s infinite}
  @keyframes pulse{0%,100%{opacity:1}50%{opacity:0.5}}
  /* Voice control hints */
  [data-voice-label]{position:relative}
  [data-voice-label]::after{content:attr(data-voice-label);position:absolute;left:100%;margin-left:8px;padding:4px 8px;background:#000;color:#fff;border-radius:4px;font-size:12px;white-space:nowrap;opacity:0;pointer-events:none;transition:opacity 0.2s;z-index:10002}
  .voice-control-mode [data-voice-label]::after{opacity:1}
  /* Screen reader optimizations */
  .sr-optimize-nvda *[role="button"]:focus::before,
  .sr-optimize-jaws *[role="button"]:focus::before{content:"Button: "}
  /* Simplified language indicator */
  .simplified-text{font-size:110%;line-height:1.8;max-width:65ch}
  .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  button[role="switch"]{outline:none}
  button[role="switch"]:focus-visible{outline:3px solid var(--accent);outline-offset:2px}
  button[role="switch"][aria-checked="false"]{background:#9ca3af}
  button[role="switch"][aria-checked="false"] span{transform:translateX(0) !important}
</style>
<svg style="position:absolute;width:0;height:0">
  <defs>
	<filter id="protanopia" color-interpolation-filters="sRGB">
	  <feColorMatrix type="matrix" values="0.567, 0.433, 0, 0, 0  0.558, 0.442, 0, 0, 0  0, 0.242, 0.758, 0, 0  0, 0, 0, 1, 0"/>
	</filter>
	<filter id="deuteranopia" color-interpolation-filters="sRGB">
	  <feColorMatrix type="matrix" values="0.625, 0.375, 0, 0, 0  0.7, 0.3, 0, 0, 0  0, 0.3, 0.7, 0, 0  0, 0, 0, 1, 0"/>
	</filter>
	<filter id="tritanopia" color-interpolation-filters="sRGB">
	  <feColorMatrix type="matrix" values="0.95, 0.05, 0, 0, 0  0, 0.433, 0.567, 0, 0  0, 0.475, 0.525, 0, 0  0, 0, 0, 1, 0"/>
	</filter>
  </defs>
</svg>
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>
  
  <!-- Accessibility Settings Panel -->
  <div class="a11y-panel" role="region" aria-label="Accessibility settings">
	<button id="a11yToggle" class="a11y-toggle" aria-label="Open accessibility settings" aria-expanded="false" aria-controls="a11yMenu">
	  ‚ôø Accessibility
	</button>
	<div id="a11yMenu" class="a11y-menu" role="menu" aria-labelledby="a11yToggle">
	  <div class="a11y-section">
		<h3>Visual Settings</h3>
		
		<div class="a11y-control">
		  <label for="highContrast">
			<input type="checkbox" id="highContrast" role="menuitemcheckbox" aria-checked="false">
			<span>High contrast mode</span>
		  </label>
		</div>
		
		<div class="a11y-control">
		  <label for="textSize">
			<span>Text size:</span>
		  </label>
		  <input type="range" id="textSize" min="100" max="200" value="100" step="25" aria-label="Text size">
		  <span class="a11y-value" id="textSizeValue">100%</span>
		</div>
		
		<div class="a11y-control">
		  <label for="colorScheme">
			<span>Color scheme:</span>
		  </label>
		  <select id="colorScheme" class="a11y-select" role="menuitem" aria-label="Color scheme">
			<option value="default">Default</option>
			<option value="protanopia">Protanopia (red-blind)</option>
			<option value="deuteranopia">Deuteranopia (green-blind)</option>
			<option value="tritanopia">Tritanopia (blue-blind)</option>
			<option value="monochrome">Monochrome</option>
		  </select>
		</div>
		
		<div class="a11y-control">
		  <label for="enhancedFocus">
			<input type="checkbox" id="enhancedFocus" role="menuitemcheckbox" aria-checked="false">
			<span>Enhanced focus indicators</span>
		  </label>
		</div>
	  </div>
	  
	  <div class="a11y-section">
		<h3>Motion & Animation</h3>
		
		<div class="a11y-control">
		  <label for="reduceMotion">
			<input type="checkbox" id="reduceMotion" role="menuitemcheckbox" aria-checked="false">
			<span>Reduce motion</span>
		  </label>
		</div>
	  </div>
	  
	  <div class="a11y-section">
		<h3>Language & Reading</h3>
		
		<div class="a11y-control">
		  <label for="simpleLanguage">
			<input type="checkbox" id="simpleLanguage" role="menuitemcheckbox" aria-checked="false">
			<span>Simplified language</span>
		  </label>
		</div>
		
		<div class="a11y-control">
		  <label for="readingGuide">
			<input type="checkbox" id="readingGuide" role="menuitemcheckbox" aria-checked="false">
			<span>Reading guide (line highlight)</span>
		  </label>
		</div>
	  </div>
	  
	  <div class="a11y-section">
		<h3>Keyboard & Navigation</h3>
		
		<div class="a11y-control">
		  <label for="keyboardShortcuts">
			<input type="checkbox" id="keyboardShortcuts" role="menuitemcheckbox" aria-checked="true">
			<span>Enable keyboard shortcuts</span>
		  </label>
		</div>
		
		<div class="a11y-control">
		  <label for="tabOrder">
			<input type="checkbox" id="tabOrder" role="menuitemcheckbox" aria-checked="false">
			<span>Visual tab order indicator</span>
		  </label>
		</div>
	  </div>
	  
	  <div class="a11y-section">
		<h3>Screen Reader</h3>
		
		<div class="a11y-control">
		  <label for="screenReaderMode">
			<select id="screenReaderMode" class="a11y-select" role="menuitem" aria-label="Screen reader optimization">
			  <option value="auto">Auto-detect</option>
			  <option value="nvda">NVDA</option>
			  <option value="jaws">JAWS</option>
			  <option value="voiceover">VoiceOver (macOS/iOS)</option>
			  <option value="talkback">TalkBack (Android)</option>
			  <option value="orca">Orca (Linux)</option>
			  <option value="narrator">Narrator (Windows)</option>
			</select>
			<span style="font-size:12px;margin-top:4px;display:block">Screen reader optimization</span>
		  </label>
		</div>
		
		<div class="a11y-control">
		  <label for="announceChanges">
			<input type="checkbox" id="announceChanges" role="menuitemcheckbox" aria-checked="true">
			<span>Announce all changes</span>
		  </label>
		</div>
		
		<div class="a11y-control">
		  <label for="ariaLive">
			<input type="checkbox" id="ariaLive" role="menuitemcheckbox" aria-checked="true">
			<span>Enhanced ARIA live regions</span>
		  </label>
		</div>
	  </div>
	  
	  <div class="a11y-section">
		<button class="primary" style="width:100%" onclick="resetA11ySettings()">Reset to defaults</button>
	  </div>
	</div>
  </div>
  
  <div class="container">
	<header>
	  <div style="display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:12px">
		<div style="flex:1;min-width:250px">
		  <h1>Accessibility Implementation Guidelines</h1>
		  <p>Comprehensive guide for creating accessible web applications</p>
		</div>
		<div style="display:flex;align-items:center;gap:8px">
		  <label for="audioToggle" style="font-size:14px;font-weight:500;color:#374151;cursor:pointer;display:flex;align-items:center;gap:6px">
			<span>üîä</span>
			<span>Audio alerts</span>
		  </label>
		  <button id="audioToggle" role="switch" aria-checked="true" aria-labelledby="audioToggleLabel" style="width:50px;height:28px;border-radius:14px;border:2px solid #e6e9ef;background:#2563eb;position:relative;cursor:pointer;transition:background 0.2s">
			<span style="position:absolute;left:2px;top:2px;width:22px;height:22px;border-radius:50%;background:#fff;transition:transform 0.2s;transform:translateX(22px)"></span>
		  </button>
		  <span id="audioToggleLabel" class="sr-only">Toggle audio alerts for accessibility</span>
		</div>
	  </div>
	</header>
	
	<main id="main-content" role="main">
	  <div id="content" class="loading" role="region" aria-label="Guidelines content">
		<p>Loading accessibility guidelines...</p>
	  </div>
	</main>
	
	<footer role="contentinfo">
	  <p>Last updated: <span id="lastUpdated"></span></p>
	  <p><a href="index.html">‚Üê Back to CAPTCHA Demo</a></p>
	</footer>
  </div>
  
  <a href="#main-content" class="back-to-top" aria-label="Back to top">‚Üë Top</a>
  
  <div id="lr" class="sr-only" aria-live="assertive" aria-atomic="true"></div>
  
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script>
/* ---------- Browser Compatibility Layer ---------- */
(function() {
  'use strict';
  
  const browserInfo = {
	name: 'unknown',
	version: 0,
	supportsLocalStorage: false,
	supportsAudioContext: false
  };
  
  const ua = navigator.userAgent.toLowerCase();
  if (ua.indexOf('chrome') !== -1 && ua.indexOf('edg') === -1) {
	browserInfo.name = 'Chrome';
  } else if (ua.indexOf('firefox') !== -1) {
	browserInfo.name = 'Firefox';
  } else if (ua.indexOf('safari') !== -1) {
	browserInfo.name = 'Safari';
  } else if (ua.indexOf('edg') !== -1) {
	browserInfo.name = 'Edge';
  }
  
  browserInfo.supportsAudioContext = !!(window.AudioContext || window.webkitAudioContext);
  
  try {
	localStorage.setItem('__test__', '1');
	localStorage.removeItem('__test__');
	browserInfo.supportsLocalStorage = true;
  } catch (e) {
	browserInfo.supportsLocalStorage = false;
  }
  
  const safeStorage = {
	setItem: function(key, value) {
	  try {
		if (browserInfo.supportsLocalStorage) {
		  localStorage.setItem(key, value);
		} else {
		  try {
			sessionStorage.setItem(key, value);
		  } catch (e) {
			window._memoryStorage = window._memoryStorage || {};
			window._memoryStorage[key] = value;
		  }
		}
	  } catch (e) {
		console.warn('Storage not available:', e);
	  }
	},
	getItem: function(key) {
	  try {
		if (browserInfo.supportsLocalStorage) {
		  return localStorage.getItem(key);
		} else {
		  try {
			return sessionStorage.getItem(key);
		  } catch (e) {
			return window._memoryStorage && window._memoryStorage[key] || null;
		  }
		}
	  } catch (e) {
		return null;
	  }
	},
	removeItem: function(key) {
	  try {
		if (browserInfo.supportsLocalStorage) {
		  localStorage.removeItem(key);
		} else {
		  try {
			sessionStorage.removeItem(key);
		  } catch (e) {
			if (window._memoryStorage) {
			  delete window._memoryStorage[key];
			}
		  }
		}
	  } catch (e) {
		console.warn('Storage removal failed:', e);
	  }
	}
  };
  
  window.browserInfo = browserInfo;
  window.safeStorage = safeStorage;
})();

/* ---------- Audio Alert System for Accessibility ---------- */
let audioEnabled = true;
let audioContext = null;

function initAudioContext() {
  if (!audioContext && (window.AudioContext || window.webkitAudioContext)) {
	try {
	  const AudioContextClass = window.AudioContext || window.webkitAudioContext;
	  audioContext = new AudioContextClass();
	  
	  if (audioContext.state === 'suspended') {
		audioContext.resume().catch(e => {
		  console.warn('Audio context resume failed:', e);
		});
	  }
	} catch (e) {
	  console.warn('Audio context initialization failed:', e);
	  audioEnabled = false;
	}
  }
}

function playTone(frequency, duration, type = 'sine', volume = 0.3) {
  if (!audioEnabled || !audioContext) return;
  
  try {
	if (audioContext.state === 'suspended') {
	  audioContext.resume();
	}
	
	const oscillator = audioContext.createOscillator();
	const gainNode = audioContext.createGain();
	
	oscillator.connect(gainNode);
	gainNode.connect(audioContext.destination);
	
	oscillator.type = type;
	oscillator.frequency.value = frequency;
	
	gainNode.gain.setValueAtTime(0, audioContext.currentTime);
	gainNode.gain.linearRampToValueAtTime(volume, audioContext.currentTime + 0.01);
	gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + duration - 0.01);
	
	oscillator.start(audioContext.currentTime);
	oscillator.stop(audioContext.currentTime + duration);
  } catch (e) {
	console.warn('Audio playback failed:', e);
  }
}

function playSuccessSound() {
  if (!audioEnabled) return;
  playTone(523.25, 0.15, 'sine', 0.25);
  setTimeout(() => playTone(659.25, 0.15, 'sine', 0.25), 150);
  setTimeout(() => playTone(783.99, 0.2, 'sine', 0.25), 300);
}

function playErrorSound() {
  if (!audioEnabled) return;
  playTone(440, 0.1, 'square', 0.3);
  setTimeout(() => playTone(349.23, 0.15, 'square', 0.3), 100);
  setTimeout(() => playTone(261.63, 0.2, 'square', 0.3), 250);
}

function playInfoSound() {
  if (!audioEnabled) return;
  playTone(600, 0.15, 'sine', 0.2);
}

function toggleAudioAlerts() {
  audioEnabled = !audioEnabled;
  const toggle = document.getElementById('audioToggle');
  if (toggle) {
	toggle.setAttribute('aria-checked', audioEnabled.toString());
	if (audioEnabled) {
	  initAudioContext();
	  setTimeout(() => playInfoSound(), 100);
	  announceToScreenReader('Audio alerts enabled.');
	} else {
	  announceToScreenReader('Audio alerts disabled.');
	}
  }
  safeStorage.setItem('audioAlertsEnabled', audioEnabled.toString());
}

function loadAudioPreference() {
  const saved = safeStorage.getItem('audioAlertsEnabled');
  if (saved !== null) {
	audioEnabled = saved === 'true';
	const toggle = document.getElementById('audioToggle');
	if (toggle) {
	  toggle.setAttribute('aria-checked', audioEnabled.toString());
	}
  }
}

document.addEventListener('click', () => {
  if (!audioContext) {
	initAudioContext();
  }
}, { once: true });

/* ---------- Screen Reader Announcements ---------- */
function announceToScreenReader(message, priority = 'polite') {
  const lr = document.getElementById('lr');
  if (!lr) return;
  lr.setAttribute('aria-live', priority);
  lr.textContent = message;
  
  setTimeout(() => {
	lr.textContent = '';
  }, 1000);
}
</script>
<script>
// Use marked.js for proper markdown parsing
let marked = window.marked || null;

// If marked.js failed to load, use fallback parser
if (!marked) {
	console.warn('Marked.js not loaded, using fallback parser');
	marked = {
		parse: function(md) {
			return parseMarkdownFallback(md);
		}
	};
}

// Configure marked.js options
if (marked && marked.setOptions) {
	marked.setOptions({
		breaks: true,
		gfm: true,
		headerIds: true,
		headerPrefix: 'heading-',
		highlight: function(code, lang) {
			return escapeHtml(code);
		}
	});
}

// Fallback markdown parser
function parseMarkdownFallback(markdown) {
	let html = markdown;
	
	// Code blocks first (before other processing)
	html = html.replace(/```(\w+)?\n([\s\S]*?)```/g, (match, lang, code) => {
		return `<pre><code class="language-${lang || 'text'}">${escapeHtml(code.trim())}</code></pre>`;
	});
	
	// Inline code (but not inside code blocks)
	const placeholders = [];
	let placeholderIndex = 0;
	
	// Protect code blocks
	html = html.replace(/<pre>[\s\S]*?<\/pre>/g, (match) => {
		placeholders.push(match);
		return `__CODEBLOCK_${placeholderIndex++}__`;
	});
	
	// Process inline code
	html = html.replace(/`([^`\n]+)`/g, '<code>$1</code>');
	
	// Restore code blocks
	placeholders.forEach((block, idx) => {
		html = html.replace(`__CODEBLOCK_${idx}__`, block);
	});
	
	// Headers
	html = html.replace(/^#### (.*$)/gim, '<h4 id="heading-$1">$1</h4>');
	html = html.replace(/^### (.*$)/gim, '<h3 id="heading-$1">$1</h3>');
	html = html.replace(/^## (.*$)/gim, '<h2 id="heading-$1">$1</h2>');
	html = html.replace(/^# (.*$)/gim, '<h1 id="heading-$1">$1</h1>');
	
	// Bold and italic
	html = html.replace(/\*\*\*(.+?)\*\*\*/g, '<strong><em>$1</em></strong>');
	html = html.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
	html = html.replace(/\*(.+?)\*/g, '<em>$1</em>');
	
	// Links
	html = html.replace(/\[([^\]]+)\]\(([^)]+)\)/g, (match, text, url) => {
		const isExternal = url.startsWith('http');
		const target = isExternal ? ' target="_blank" rel="noopener noreferrer"' : '';
		return `<a href="${url}"${target}>${text}</a>`;
	});
	
	// Blockquotes
	html = html.replace(/^> (.+)$/gim, '<blockquote>$1</blockquote>');
	
	// Horizontal rules
	html = html.replace(/^---$/gim, '<hr>');
	html = html.replace(/^\*\*\*$/gim, '<hr>');
	
	// Lists - handle unordered
	html = html.replace(/^[\*\-\+]\s+(.+)$/gim, '<li>$1</li>');
	// Wrap consecutive list items
	html = html.replace(/(<li>.*?<\/li>\n?)+/g, (match) => {
		if (match.trim()) {
			return '<ul>' + match + '</ul>';
		}
		return match;
	});
	
	// Ordered lists
	html = html.replace(/^\d+\.\s+(.+)$/gim, '<li>$1</li>');
	
	// Paragraphs
	const blocks = html.split(/\n\n+/);
	html = blocks.map(block => {
		block = block.trim();
		if (!block) return '';
		if (block.match(/^<[h|u|o|p|d|t|b|p|h|n]/)) return block;
		if (block.match(/^<li>/)) return block;
		return '<p>' + block + '</p>';
	}).join('\n\n');
	
	return html;
}

function escapeHtml(text) {
	const div = document.createElement('div');
	div.textContent = text;
	return div.innerHTML;
}

// Generate table of contents
function generateTOC(html) {
  const headings = html.match(/<h[2-3][^>]*>(.*?)<\/h[2-3]>/gi) || [];
  if (headings.length === 0) return '';
  
  let toc = '<nav aria-label="Table of contents"><h2>Table of Contents</h2><ul>';
  
  headings.forEach((heading, index) => {
	const text = heading.replace(/<[^>]+>/g, '');
	const level = heading.match(/<h(\d)/)[1];
	const id = 'heading-' + index;
	const indent = level === '3' ? ' style="padding-left: 16px;"' : '';
	
	// Add ID to heading in HTML
	html = html.replace(heading, heading.replace(/<h\d/, `<h${level} id="${id}"`));
	
	toc += `<li${indent}><a href="#${id}">${text}</a></li>`;
  });
  
  toc += '</ul></nav>';
  
  return { html, toc };
}

// Load and display markdown
async function loadGuidelines() {
  try {
	const response = await fetch('ACCESSIBILITY_GUIDELINES.md');
	if (!response.ok) {
	  throw new Error('Failed to load guidelines file');
	}
	
	const markdown = await response.text();
	let html = marked.parse(markdown);
	
	// Generate TOC
	const { html: updatedHtml, toc } = generateTOC(html);
	html = updatedHtml;
	
	// Insert TOC after first heading
	html = html.replace(/(<h1>.*?<\/h1>)/, '$1' + toc);
	
	// Update content
	const contentDiv = document.getElementById('content');
	contentDiv.innerHTML = html;
	contentDiv.classList.remove('loading');
	
	// Update last updated
	const lastUpdated = document.getElementById('lastUpdated');
	lastUpdated.textContent = new Date().toLocaleDateString();
	
	// Add smooth scroll for anchor links
	document.querySelectorAll('a[href^="#"]').forEach(anchor => {
	  anchor.addEventListener('click', function(e) {
		e.preventDefault();
		const target = document.querySelector(this.getAttribute('href'));
		if (target) {
		  target.scrollIntoView({ behavior: 'smooth', block: 'start' });
		  target.setAttribute('tabindex', '-1');
		  target.focus();
		}
	  });
	});
	
	// Show back to top button on scroll
	let backToTop = document.querySelector('.back-to-top');
	window.addEventListener('scroll', () => {
	  if (window.pageYOffset > 300) {
		backToTop.classList.add('visible');
	  } else {
		backToTop.classList.remove('visible');
	  }
	});
	
	backToTop.addEventListener('click', (e) => {
	  e.preventDefault();
	  window.scrollTo({ top: 0, behavior: 'smooth' });
	});
	
  } catch (error) {
	console.error('Error loading guidelines:', error);
	const contentDiv = document.getElementById('content');
	contentDiv.innerHTML = `
	  <div class="error" role="alert">
		<strong>Error loading guidelines</strong>
		<p>Could not load the accessibility guidelines file. Please ensure ACCESSIBILITY_GUIDELINES.md exists in the same directory.</p>
		<p><a href="ACCESSIBILITY_GUIDELINES.md" download>Download the guidelines file directly</a></p>
	  </div>
	`;
	contentDiv.classList.remove('loading');
  }
}

// Generate table of contents from HTML headings
function generateTOC(html) {
	// Extract all h2 and h3 headings
	const headingRegex = /<h([2-3])[^>]*id="([^"]+)"[^>]*>(.*?)<\/h[2-3]>/gi;
	const headings = [];
	let match;
	
	while ((match = headingRegex.exec(html)) !== null) {
		headings.push({
			level: parseInt(match[1]),
			id: match[2],
			text: match[3].replace(/<[^>]+>/g, '')
		});
	}
	
	// Also try headings without IDs (for fallback parser)
	if (headings.length === 0) {
		const simpleHeadingRegex = /<h([2-3])[^>]*>(.*?)<\/h[2-3]>/gi;
		let simpleMatch;
		let index = 0;
		
		while ((simpleMatch = simpleHeadingRegex.exec(html)) !== null) {
			const level = parseInt(simpleMatch[1]);
			const text = simpleMatch[2].replace(/<[^>]+>/g, '');
			const id = `heading-${index++}`;
			
			// Add ID to heading
			html = html.replace(simpleMatch[0], simpleMatch[0].replace(/<h\d/, `<h${level} id="${id}"`));
			
			headings.push({ level, id, text });
		}
	}
	
	if (headings.length === 0) return { html, toc: '' };
	
	let toc = '<nav aria-label="Table of contents"><h2>Table of Contents</h2><ul>';
	
	headings.forEach(({ level, id, text }) => {
		const indent = level === 3 ? ' style="padding-left: 16px;"' : '';
		toc += `<li${indent}><a href="#${id}">${escapeHtml(text)}</a></li>`;
	});
	
	toc += '</ul></nav>';
	
	return { html, toc };
}

/* ---------- Comprehensive Accessibility Features ---------- */

// Accessibility state
const a11yState = {
  highContrast: false,
  textSize: 100,
  colorScheme: 'default',
  enhancedFocus: false,
  reduceMotion: false,
  simpleLanguage: false,
  readingGuide: false,
  keyboardShortcuts: true,
  tabOrder: false,
  screenReaderMode: 'auto',
  announceChanges: true,
  ariaLive: true,
  voiceControl: false
};

// Simplified language dictionary
const simpleLanguageMap = {
  'Table of Contents': 'Contents',
  'Back to top': 'Top',
  'Last updated': 'Updated',
  'Error loading guidelines': 'Error loading',
  'Download the guidelines file directly': 'Download file',
  'Accessibility Implementation Guidelines': 'Accessibility Guide'
};

// Detect screen reader
function detectScreenReader() {
  if (a11yState.screenReaderMode !== 'auto') {
	return a11yState.screenReaderMode;
  }
  
  const ua = navigator.userAgent.toLowerCase();
  const isWindows = ua.includes('win');
  const isMac = ua.includes('mac');
  const isIOS = /iphone|ipad|ipod/.test(ua);
  const isAndroid = ua.includes('android');
  const isLinux = ua.includes('linux');
  
  if (window.speechSynthesis && window.speechSynthesis.getVoices().length > 0) {
	if (isMac || isIOS) return 'voiceover';
	if (isWindows) return 'narrator';
  }
  
  if (isWindows) return 'nvda';
  if (isMac || isIOS) return 'voiceover';
  if (isAndroid) return 'talkback';
  if (isLinux) return 'orca';
  
  return 'nvda';
}

// Apply screen reader optimizations
function applyScreenReaderOptimizations() {
  const srMode = detectScreenReader();
  document.body.className = document.body.className.replace(/sr-optimize-\w+/g, '');
  document.body.classList.add(`sr-optimize-${srMode}`);
  
  if (srMode === 'nvda' || srMode === 'jaws') {
	document.querySelectorAll('button').forEach(btn => {
	  if (!btn.getAttribute('aria-label') && !btn.textContent.trim()) {
		btn.setAttribute('aria-label', btn.textContent || 'Button');
	  }
	});
  }
  
  if (srMode === 'voiceover') {
	document.querySelectorAll('[role]').forEach(el => {
	  if (!el.getAttribute('aria-label') && !el.getAttribute('aria-labelledby')) {
		const label = el.textContent.substring(0, 50);
		if (label) el.setAttribute('aria-label', label);
	  }
	});
  }
}

// High contrast mode
function toggleHighContrast(enabled) {
  a11yState.highContrast = enabled;
  if (enabled) {
	document.body.classList.add('high-contrast');
  } else {
	document.body.classList.remove('high-contrast');
  }
  saveA11ySettings();
  announceToScreenReader(enabled ? 'High contrast mode enabled' : 'High contrast mode disabled');
  if (enabled) playInfoSound();
}

// Text size control
function setTextSize(size) {
  a11yState.textSize = size;
  document.body.style.fontSize = size + '%';
  const valueEl = document.getElementById('textSizeValue');
  if (valueEl) valueEl.textContent = size + '%';
  saveA11ySettings();
}

// Color scheme (color blindness)
function setColorScheme(scheme) {
  a11yState.colorScheme = scheme;
  document.body.className = document.body.className.replace(/color-\w+/g, '');
  if (scheme !== 'default') {
	document.body.classList.add(`color-${scheme}`);
  }
  saveA11ySettings();
  announceToScreenReader(`Color scheme changed to ${scheme}`);
}

// Enhanced focus indicators
function toggleEnhancedFocus(enabled) {
  a11yState.enhancedFocus = enabled;
  if (enabled) {
	document.body.classList.add('enhanced-focus');
  } else {
	document.body.classList.remove('enhanced-focus');
  }
  saveA11ySettings();
}

// Reduce motion
function toggleReduceMotion(enabled) {
  a11yState.reduceMotion = enabled;
  if (enabled) {
	document.body.classList.add('reduce-motion');
  } else {
	document.body.classList.remove('reduce-motion');
  }
  saveA11ySettings();
}

// Simplified language
function toggleSimpleLanguage(enabled) {
  a11yState.simpleLanguage = enabled;
  if (enabled) {
	applySimpleLanguage();
  } else {
	removeSimpleLanguage();
  }
  saveA11ySettings();
  announceToScreenReader(enabled ? 'Simplified language enabled' : 'Simplified language disabled');
}

function applySimpleLanguage() {
  document.querySelectorAll('*').forEach(el => {
	if (el.children.length === 0 && el.textContent) {
	  const text = el.textContent.trim();
	  if (simpleLanguageMap[text]) {
		el.setAttribute('data-original-text', text);
		el.textContent = simpleLanguageMap[text];
	  }
	}
  });
}

function removeSimpleLanguage() {
  document.querySelectorAll('[data-original-text]').forEach(el => {
	el.textContent = el.getAttribute('data-original-text');
	el.removeAttribute('data-original-text');
  });
}

// Reading guide (line highlight)
let readingGuideEl = null;
function toggleReadingGuide(enabled) {
  a11yState.readingGuide = enabled;
  if (enabled) {
	if (!readingGuideEl) {
	  readingGuideEl = document.createElement('div');
	  readingGuideEl.className = 'reading-guide';
	  readingGuideEl.setAttribute('aria-hidden', 'true');
	  document.body.appendChild(readingGuideEl);
	}
	readingGuideEl.classList.add('active');
	updateReadingGuide();
	document.addEventListener('mousemove', updateReadingGuide);
	document.addEventListener('keydown', updateReadingGuideOnKey);
  } else {
	if (readingGuideEl) {
	  readingGuideEl.classList.remove('active');
	}
	document.removeEventListener('mousemove', updateReadingGuide);
	document.removeEventListener('keydown', updateReadingGuideOnKey);
  }
  saveA11ySettings();
}

function updateReadingGuide(e) {
  if (!readingGuideEl || !a11yState.readingGuide) return;
  const y = e ? e.clientY : window.innerHeight / 2;
  readingGuideEl.style.top = (y - 15) + 'px';
  readingGuideEl.style.left = '0';
  readingGuideEl.style.width = '100%';
  readingGuideEl.style.height = '30px';
}

function updateReadingGuideOnKey(e) {
  if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {
	setTimeout(() => {
	  const focused = document.activeElement;
	  if (focused && focused.getBoundingClientRect) {
		const rect = focused.getBoundingClientRect();
		updateReadingGuide({clientY: rect.top + rect.height / 2});
	  }
	}, 100);
  }
}

// Tab order indicator
let tabIndicatorEl = null;
function toggleTabOrder(enabled) {
  a11yState.tabOrder = enabled;
  if (enabled) {
	if (!tabIndicatorEl) {
	  tabIndicatorEl = document.createElement('div');
	  tabIndicatorEl.className = 'tab-indicator';
	  tabIndicatorEl.setAttribute('aria-hidden', 'true');
	  document.body.appendChild(tabIndicatorEl);
	}
	updateTabIndicator();
	document.addEventListener('keydown', handleTabOrderKey);
	document.addEventListener('focusin', updateTabIndicator);
  } else {
	if (tabIndicatorEl) {
	  tabIndicatorEl.classList.remove('active');
	}
	document.removeEventListener('keydown', handleTabOrderKey);
	document.removeEventListener('focusin', updateTabIndicator);
  }
  saveA11ySettings();
}

function handleTabOrderKey(e) {
  if (e.key === 'Tab') {
	setTimeout(updateTabIndicator, 50);
  }
}

function updateTabIndicator() {
  if (!tabIndicatorEl || !a11yState.tabOrder) return;
  const focused = document.activeElement;
  if (focused && focused !== document.body) {
	const rect = focused.getBoundingClientRect();
	tabIndicatorEl.style.top = (rect.top - 3) + 'px';
	tabIndicatorEl.style.left = (rect.left - 3) + 'px';
	tabIndicatorEl.style.width = (rect.width + 6) + 'px';
	tabIndicatorEl.style.height = (rect.height + 6) + 'px';
	tabIndicatorEl.classList.add('active');
  }
}

// Keyboard shortcuts
function setupKeyboardShortcuts() {
  document.addEventListener('keydown', (e) => {
	if (!a11yState.keyboardShortcuts) return;
	
	// Alt + A: Open accessibility menu
	if (e.altKey && e.key === 'a') {
	  e.preventDefault();
	  document.getElementById('a11yToggle')?.click();
	}
	
	// Escape: Close accessibility menu
	if (e.key === 'Escape') {
	  const menu = document.getElementById('a11yMenu');
	  if (menu?.classList.contains('open')) {
		document.getElementById('a11yToggle')?.click();
	  }
	}
  });
}

// Save/load accessibility settings
function saveA11ySettings() {
  safeStorage.setItem('a11ySettings', JSON.stringify(a11yState));
}

function loadA11ySettings() {
  const saved = safeStorage.getItem('a11ySettings');
  if (saved) {
	try {
	  const savedSettings = JSON.parse(saved);
	  Object.assign(a11yState, savedSettings);
	  if (a11yState.keyboardShortcuts === undefined || a11yState.keyboardShortcuts === null) {
		a11yState.keyboardShortcuts = true;
	  }
	  applyAllA11ySettings();
	} catch (e) {
	  console.warn('Failed to load accessibility settings:', e);
	  a11yState.keyboardShortcuts = true;
	}
  } else {
	a11yState.keyboardShortcuts = true;
  }
}

function applyAllA11ySettings() {
  toggleHighContrast(a11yState.highContrast);
  setTextSize(a11yState.textSize);
  setColorScheme(a11yState.colorScheme);
  toggleEnhancedFocus(a11yState.enhancedFocus);
  toggleReduceMotion(a11yState.reduceMotion);
  toggleSimpleLanguage(a11yState.simpleLanguage);
  toggleReadingGuide(a11yState.readingGuide);
  toggleTabOrder(a11yState.tabOrder);
  const kbCheckbox = document.getElementById('keyboardShortcuts');
  if (kbCheckbox) {
	kbCheckbox.checked = a11yState.keyboardShortcuts !== false;
	kbCheckbox.setAttribute('aria-checked', (a11yState.keyboardShortcuts !== false).toString());
  }
  const srModeSelect = document.getElementById('screenReaderMode');
  if (srModeSelect) srModeSelect.value = a11yState.screenReaderMode;
  const announceCheckbox = document.getElementById('announceChanges');
  if (announceCheckbox) announceCheckbox.checked = a11yState.announceChanges;
  const ariaLiveCheckbox = document.getElementById('ariaLive');
  if (ariaLiveCheckbox) ariaLiveCheckbox.checked = a11yState.ariaLive;
  applyScreenReaderOptimizations();
}

function resetA11ySettings() {
  safeStorage.removeItem('a11ySettings');
  location.reload();
}

// Wire up accessibility controls
document.addEventListener('DOMContentLoaded', () => {
  // Accessibility menu toggle
  const a11yToggle = document.getElementById('a11yToggle');
  const a11yMenu = document.getElementById('a11yMenu');
  
  a11yToggle?.addEventListener('click', () => {
	const isOpen = a11yMenu.classList.toggle('open');
	a11yToggle.setAttribute('aria-expanded', isOpen.toString());
	if (isOpen) {
	  a11yMenu.focus();
	}
  });
  
  // High contrast
  document.getElementById('highContrast')?.addEventListener('change', (e) => {
	toggleHighContrast(e.target.checked);
  });
  
  // Text size
  const textSizeSlider = document.getElementById('textSize');
  textSizeSlider?.addEventListener('input', (e) => {
	setTextSize(parseInt(e.target.value));
  });
  
  // Color scheme
  document.getElementById('colorScheme')?.addEventListener('change', (e) => {
	setColorScheme(e.target.value);
  });
  
  // Enhanced focus
  document.getElementById('enhancedFocus')?.addEventListener('change', (e) => {
	toggleEnhancedFocus(e.target.checked);
  });
  
  // Reduce motion
  document.getElementById('reduceMotion')?.addEventListener('change', (e) => {
	toggleReduceMotion(e.target.checked);
  });
  
  // Simple language
  document.getElementById('simpleLanguage')?.addEventListener('change', (e) => {
	toggleSimpleLanguage(e.target.checked);
  });
  
  // Reading guide
  document.getElementById('readingGuide')?.addEventListener('change', (e) => {
	toggleReadingGuide(e.target.checked);
  });
  
  // Keyboard shortcuts
  document.getElementById('keyboardShortcuts')?.addEventListener('change', (e) => {
	a11yState.keyboardShortcuts = e.target.checked;
	saveA11ySettings();
  });
  
  // Tab order
  document.getElementById('tabOrder')?.addEventListener('change', (e) => {
	toggleTabOrder(e.target.checked);
  });
  
  // Screen reader mode
  document.getElementById('screenReaderMode')?.addEventListener('change', (e) => {
	a11yState.screenReaderMode = e.target.value;
	applyScreenReaderOptimizations();
	saveA11ySettings();
  });
  
  // Announce changes
  document.getElementById('announceChanges')?.addEventListener('change', (e) => {
	a11yState.announceChanges = e.target.checked;
	saveA11ySettings();
  });
  
  // ARIA live
  document.getElementById('ariaLive')?.addEventListener('change', (e) => {
	a11yState.ariaLive = e.target.checked;
	saveA11ySettings();
  });
  
  // Load settings and initialize
  loadA11ySettings();
  loadAudioPreference();
  setupKeyboardShortcuts();
  applyScreenReaderOptimizations();
  
  // Close menu when clicking outside
  document.addEventListener('click', (e) => {
	if (a11yMenu && !a11yMenu.contains(e.target) && !a11yToggle.contains(e.target)) {
	  if (a11yMenu.classList.contains('open')) {
		a11yMenu.classList.remove('open');
		a11yToggle.setAttribute('aria-expanded', 'false');
	  }
	}
  });
});

// Wire up accessibility controls
document.addEventListener('DOMContentLoaded', () => {
  // Accessibility menu toggle
  const a11yToggle = document.getElementById('a11yToggle');
  const a11yMenu = document.getElementById('a11yMenu');
  
  a11yToggle?.addEventListener('click', () => {
	const isOpen = a11yMenu.classList.toggle('open');
	a11yToggle.setAttribute('aria-expanded', isOpen.toString());
	if (isOpen) {
	  a11yMenu.focus();
	}
  });
  
  // High contrast
  document.getElementById('highContrast')?.addEventListener('change', (e) => {
	toggleHighContrast(e.target.checked);
	e.target.setAttribute('aria-checked', e.target.checked.toString());
  });
  
  // Text size
  const textSizeSlider = document.getElementById('textSize');
  textSizeSlider?.addEventListener('input', (e) => {
	setTextSize(parseInt(e.target.value));
  });
  
  // Color scheme
  document.getElementById('colorScheme')?.addEventListener('change', (e) => {
	setColorScheme(e.target.value);
  });
  
  // Enhanced focus
  document.getElementById('enhancedFocus')?.addEventListener('change', (e) => {
	toggleEnhancedFocus(e.target.checked);
	e.target.setAttribute('aria-checked', e.target.checked.toString());
  });
  
  // Reduce motion
  document.getElementById('reduceMotion')?.addEventListener('change', (e) => {
	toggleReduceMotion(e.target.checked);
	e.target.setAttribute('aria-checked', e.target.checked.toString());
  });
  
  // Simple language
  document.getElementById('simpleLanguage')?.addEventListener('change', (e) => {
	toggleSimpleLanguage(e.target.checked);
	e.target.setAttribute('aria-checked', e.target.checked.toString());
  });
  
  // Reading guide
  document.getElementById('readingGuide')?.addEventListener('change', (e) => {
	toggleReadingGuide(e.target.checked);
	e.target.setAttribute('aria-checked', e.target.checked.toString());
  });
  
  // Keyboard shortcuts
  document.getElementById('keyboardShortcuts')?.addEventListener('change', (e) => {
	a11yState.keyboardShortcuts = e.target.checked;
	saveA11ySettings();
	e.target.setAttribute('aria-checked', e.target.checked.toString());
  });
  
  // Tab order
  document.getElementById('tabOrder')?.addEventListener('change', (e) => {
	toggleTabOrder(e.target.checked);
	e.target.setAttribute('aria-checked', e.target.checked.toString());
  });
  
  // Screen reader mode
  document.getElementById('screenReaderMode')?.addEventListener('change', (e) => {
	a11yState.screenReaderMode = e.target.value;
	applyScreenReaderOptimizations();
	saveA11ySettings();
  });
  
  // Announce changes
  document.getElementById('announceChanges')?.addEventListener('change', (e) => {
	a11yState.announceChanges = e.target.checked;
	saveA11ySettings();
	e.target.setAttribute('aria-checked', e.target.checked.toString());
  });
  
  // ARIA live
  document.getElementById('ariaLive')?.addEventListener('change', (e) => {
	a11yState.ariaLive = e.target.checked;
	saveA11ySettings();
	e.target.setAttribute('aria-checked', e.target.checked.toString());
  });
  
  // Wire up audio toggle
  document.getElementById('audioToggle')?.addEventListener('click', () => {
	initAudioContext();
	toggleAudioAlerts();
  });
  
  // Load settings and initialize
  loadA11ySettings();
  loadAudioPreference();
  setupKeyboardShortcuts();
  applyScreenReaderOptimizations();
  
  // Close menu when clicking outside
  document.addEventListener('click', (e) => {
	if (a11yMenu && !a11yMenu.contains(e.target) && !a11yToggle.contains(e.target)) {
	  if (a11yMenu.classList.contains('open')) {
		a11yMenu.classList.remove('open');
		a11yToggle.setAttribute('aria-expanded', 'false');
	  }
	}
  });
  
  // Load guidelines
  loadGuidelines();
});

// Keyboard shortcuts
document.addEventListener('keydown', (e) => {
  // Alt + T: Back to top
  if (e.altKey && e.key === 't') {
	e.preventDefault();
	window.scrollTo({ top: 0, behavior: 'smooth' });
  }
});
</script>
</body>
</html>

